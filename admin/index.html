<!DOCTYPE html>
<html dir="rtl" lang="he">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="noindex, nofollow" />
  <title>ממשק ניהול | WDI</title>
  <link rel="icon" type="image/png" href="/images/favicon.png">
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  
  <!-- Netlify Identity Widget -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  
  <style>
    :root {
      --wdi-primary: #1a3a5c;
      --wdi-primary-light: #2a4a6c;
      --wdi-primary-dark: #0a2a4c;
      --wdi-secondary: #c9a227;
      --wdi-secondary-light: #d9b237;
      --wdi-gray-50: #f9fafb;
      --wdi-gray-100: #f3f4f6;
      --wdi-gray-200: #e5e7eb;
      --wdi-gray-300: #d1d5db;
      --wdi-gray-400: #9ca3af;
      --wdi-gray-500: #6b7280;
      --wdi-gray-600: #4b5563;
      --wdi-gray-700: #374151;
      --wdi-gray-800: #1f2937;
      --wdi-gray-900: #111827;
      --wdi-success: #10b981;
      --wdi-warning: #f59e0b;
      --wdi-error: #ef4444;
    }

    * {
      font-family: 'Assistant', sans-serif !important;
    }

    /* Main App Container */
    [data-slate-editor] {
      font-family: 'Assistant', sans-serif !important;
    }

    /* Top Bar / Header */
    header, 
    [class*="AppHeader"],
    nav[class*="Toolbartop"] {
      background: linear-gradient(135deg, var(--wdi-primary) 0%, var(--wdi-primary-dark) 100%) !important;
    }

    /* Sidebar */
    [class*="SidebarNav"],
    aside[class*="Sidebar"],
    div[class*="CollectionPane"],
    [class*="CollectionControls"] {
      background: var(--wdi-gray-50) !important;
      border-left: 1px solid var(--wdi-gray-200) !important;
    }

    /* Collection List Items */
    [class*="SidebarNavLink"],
    a[class*="CollectionLink"] {
      color: var(--wdi-gray-700) !important;
      border-radius: 8px !important;
      margin: 4px 8px !important;
      transition: all 0.2s ease !important;
    }

    [class*="SidebarNavLink"]:hover,
    a[class*="CollectionLink"]:hover {
      background: var(--wdi-primary) !important;
      color: white !important;
    }

    [class*="SidebarNavLink"][class*="active"],
    a[class*="CollectionLink"][class*="active"] {
      background: var(--wdi-primary) !important;
      color: white !important;
    }

    /* Entry Cards in List */
    [class*="ListCard"],
    [class*="EntryCard"],
    div[class*="CardsGrid"] > div {
      background: white !important;
      border: 1px solid var(--wdi-gray-200) !important;
      border-radius: 12px !important;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05) !important;
      transition: all 0.2s ease !important;
    }

    [class*="ListCard"]:hover,
    [class*="EntryCard"]:hover,
    div[class*="CardsGrid"] > div:hover {
      border-color: var(--wdi-secondary) !important;
      box-shadow: 0 4px 12px rgba(201, 162, 39, 0.15) !important;
      transform: translateY(-2px) !important;
    }

    /* Buttons - Primary */
    button[class*="ToolbarButton"],
    button[class*="Button"][class*="primary"],
    [class*="PublishButton"],
    button[class*="CreateButton"] {
      background: var(--wdi-secondary) !important;
      color: var(--wdi-primary-dark) !important;
      border: none !important;
      border-radius: 8px !important;
      font-weight: 600 !important;
      padding: 10px 20px !important;
      transition: all 0.2s ease !important;
    }

    button[class*="ToolbarButton"]:hover,
    button[class*="Button"][class*="primary"]:hover,
    [class*="PublishButton"]:hover,
    button[class*="CreateButton"]:hover {
      background: var(--wdi-secondary-light) !important;
      transform: translateY(-1px) !important;
      box-shadow: 0 4px 12px rgba(201, 162, 39, 0.3) !important;
    }

    /* Buttons - Secondary */
    button[class*="Button"]:not([class*="primary"]):not([class*="ToolbarButton"]):not([class*="CreateButton"]) {
      background: white !important;
      color: var(--wdi-primary) !important;
      border: 1px solid var(--wdi-gray-300) !important;
      border-radius: 8px !important;
      transition: all 0.2s ease !important;
    }

    button[class*="Button"]:not([class*="primary"]):not([class*="ToolbarButton"]):not([class*="CreateButton"]):hover {
      border-color: var(--wdi-primary) !important;
      background: var(--wdi-gray-50) !important;
    }

    /* Form Fields */
    input[type="text"],
    input[type="number"],
    input[type="email"],
    input[type="url"],
    input[type="date"],
    textarea,
    select,
    [class*="TextField"] input,
    [class*="TextControl"] input {
      border: 1px solid var(--wdi-gray-300) !important;
      border-radius: 8px !important;
      padding: 12px 16px !important;
      font-size: 15px !important;
      transition: all 0.2s ease !important;
      background: white !important;
    }

    input:focus,
    textarea:focus,
    select:focus {
      border-color: var(--wdi-secondary) !important;
      box-shadow: 0 0 0 3px rgba(201, 162, 39, 0.1) !important;
      outline: none !important;
    }

    /* Labels */
    label,
    [class*="ControlLabel"],
    [class*="FieldLabel"] {
      color: var(--wdi-gray-700) !important;
      font-weight: 600 !important;
      font-size: 14px !important;
      margin-bottom: 6px !important;
    }

    /* Field Hints */
    [class*="ControlHint"],
    [class*="FieldHint"] {
      color: var(--wdi-gray-500) !important;
      font-size: 13px !important;
    }

    /* Select/Dropdown Widgets */
    [class*="SelectControl"],
    [class*="SelectWidget"] {
      border-radius: 8px !important;
    }

    /* Toggle/Boolean */
    [class*="Toggle"] input:checked + span,
    [class*="Switch"] input:checked + span {
      background: var(--wdi-secondary) !important;
    }

    /* Image Preview */
    [class*="ImagePreview"],
    [class*="MediaPreview"] {
      border-radius: 12px !important;
      overflow: hidden !important;
    }

    /* Editor Toolbar */
    [class*="EditorToolbar"],
    [class*="MarkdownToolbar"] {
      background: var(--wdi-gray-50) !important;
      border-bottom: 1px solid var(--wdi-gray-200) !important;
      border-radius: 8px 8px 0 0 !important;
    }

    /* Editor Content Area */
    [class*="EditorContent"],
    [class*="MarkdownEditor"] textarea {
      border-radius: 0 0 8px 8px !important;
    }

    /* Notification / Toast Messages */
    [class*="Toast"],
    [class*="Notification"] {
      border-radius: 10px !important;
      font-weight: 500 !important;
    }

    [class*="Toast"][class*="success"],
    [class*="Notification"][class*="success"] {
      background: var(--wdi-success) !important;
    }

    /* Modal / Dialog */
    [class*="Modal"],
    [class*="Dialog"] {
      border-radius: 16px !important;
      box-shadow: 0 25px 50px rgba(0,0,0,0.15) !important;
    }

    [class*="ModalHeader"],
    [class*="DialogHeader"] {
      background: var(--wdi-primary) !important;
      color: white !important;
      border-radius: 16px 16px 0 0 !important;
    }

    /* Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--wdi-gray-100);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--wdi-gray-400);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--wdi-gray-500);
    }

    /* Loading Spinner */
    [class*="Loader"],
    [class*="Spinner"] {
      border-color: var(--wdi-secondary) !important;
      border-top-color: transparent !important;
    }

    /* Search Input */
    [class*="SearchInput"],
    input[type="search"] {
      border-radius: 20px !important;
      padding-right: 40px !important;
      background: var(--wdi-gray-100) !important;
      border: none !important;
    }

    [class*="SearchInput"]:focus,
    input[type="search"]:focus {
      background: white !important;
      box-shadow: 0 0 0 2px var(--wdi-secondary) !important;
    }

    /* Breadcrumbs */
    [class*="Breadcrumb"] {
      color: var(--wdi-gray-500) !important;
    }

    [class*="Breadcrumb"] a {
      color: var(--wdi-primary) !important;
    }

    /* Preview Pane */
    [class*="PreviewPane"] {
      background: var(--wdi-gray-50) !important;
      border-right: 1px solid var(--wdi-gray-200) !important;
    }

    /* Status Badges */
    [class*="Status"],
    [class*="Badge"] {
      border-radius: 20px !important;
      font-weight: 600 !important;
      font-size: 12px !important;
      padding: 4px 12px !important;
    }

    /* Drag Handle */
    [class*="DragHandle"] {
      color: var(--wdi-gray-400) !important;
    }

    /* List Widget Items */
    [class*="ListItem"],
    [class*="ObjectWidgetTop"] {
      background: var(--wdi-gray-50) !important;
      border: 1px solid var(--wdi-gray-200) !important;
      border-radius: 10px !important;
      margin-bottom: 8px !important;
    }

    /* Nested Object Widget */
    [class*="ObjectWidget"],
    [class*="NestedObjectWidget"] {
      background: white !important;
      border: 1px solid var(--wdi-gray-200) !important;
      border-radius: 12px !important;
      padding: 16px !important;
    }

    /* Logo Injection */
    [class*="AppHeader"]::before,
    header::before {
      content: '';
      display: block;
      width: 80px;
      height: 40px;
      background-image: url('/images/wdi-logo-white.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
      margin-left: 16px;
    }

    /* Custom Welcome Message */
    [class*="AppHeader"]::after {
      content: 'ממשק ניהול';
      color: rgba(255,255,255,0.9);
      font-size: 14px;
      font-weight: 500;
      margin-right: auto;
      padding-left: 16px;
    }

    /* Hide default logo/title */
    [class*="AppHeaderBrand"],
    [class*="BackendName"] {
      display: none !important;
    }

    /* Field Groups Styling */
    [class*="FieldGroup"],
    fieldset {
      background: white !important;
      border: 1px solid var(--wdi-gray-200) !important;
      border-radius: 12px !important;
      padding: 20px !important;
      margin-bottom: 16px !important;
    }

    [class*="FieldGroup"] legend,
    fieldset legend {
      background: var(--wdi-primary) !important;
      color: white !important;
      padding: 8px 16px !important;
      border-radius: 6px !important;
      font-weight: 600 !important;
    }

    /* Animation for cards */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    [class*="ListCard"],
    [class*="EntryCard"] {
      animation: fadeInUp 0.3s ease forwards;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      [class*="SidebarNav"],
      aside[class*="Sidebar"] {
        width: 100% !important;
      }
    }

    /* Dark mode toggle area */
    .dark-mode-toggle {
      position: fixed;
      bottom: 20px;
      left: 20px;
      z-index: 9999;
      background: var(--wdi-primary);
      color: white;
      border: none;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      transition: all 0.2s ease;
    }

    .dark-mode-toggle:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }

    /* Print styles */
    @media print {
      [class*="SidebarNav"],
      aside[class*="Sidebar"],
      [class*="AppHeader"],
      header {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <!-- Decap CMS -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  
  <script>
    // Wait for CMS to load
    if (typeof CMS !== 'undefined') {
      CMS.registerEventListener({
        name: 'preSave',
        handler: ({ entry }) => {
          // Auto-generate slug if not present
          const data = entry.get('data');
          if (!data.get('slug') && data.get('title')) {
            return entry.set('data', data.set('slug', data.get('title').toLowerCase().replace(/\s+/g, '-')));
          }
          return entry;
        },
      });
    }

    // Netlify Identity redirect
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", user => {
        if (!user) {
          window.netlifyIdentity.on("login", () => {
            document.location.href = "/admin/";
          });
        }
      });
    }
  </script>
</body>
</html>
